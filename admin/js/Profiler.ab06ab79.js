(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Profiler"],{"2f21":function(t,e,a){"use strict";var n=a("79e5");t.exports=function(t,e){return!!t&&n((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"36bd":function(t,e,a){"use strict";var n=a("4bf8"),r=a("77f1"),o=a("9def");t.exports=function(t){var e=n(this),a=o(e.length),i=arguments.length,c=r(i>1?arguments[1]:void 0,a),s=i>2?arguments[2]:void 0,l=void 0===s?a:r(s,a);while(l>c)e[c++]=t;return e}},"386b":function(t,e,a){var n=a("5ca1"),r=a("79e5"),o=a("be13"),i=/"/g,c=function(t,e,a,n){var r=String(o(t)),c="<"+e;return""!==a&&(c+=" "+a+'="'+String(n).replace(i,"&quot;")+'"'),c+">"+r+"</"+e+">"};t.exports=function(t,e){var a={};a[t]=e(c),n(n.P+n.F*r((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})),"String",a)}},"386d":function(t,e,a){"use strict";var n=a("cb7c"),r=a("83a1"),o=a("5f1b");a("214f")("search",1,(function(t,e,a,i){return[function(a){var n=t(this),r=void 0==a?void 0:a[e];return void 0!==r?r.call(a,n):new RegExp(a)[e](String(n))},function(t){var e=i(a,t,this);if(e.done)return e.value;var c=n(t),s=String(this),l=c.lastIndex;r(l,0)||(c.lastIndex=0);var u=o(c,s);return r(c.lastIndex,l)||(c.lastIndex=l),null===u?-1:u.index}]}))},"55dd":function(t,e,a){"use strict";var n=a("5ca1"),r=a("d8e8"),o=a("4bf8"),i=a("79e5"),c=[].sort,s=[1,2,3];n(n.P+n.F*(i((function(){s.sort(void 0)}))||!i((function(){s.sort(null)}))||!a("2f21")(c)),"Array",{sort:function(t){return void 0===t?c.call(o(this)):c.call(o(this),r(t))}})},"6c7b":function(t,e,a){var n=a("5ca1");n(n.P,"Array",{fill:a("36bd")}),a("9c6c")("fill")},"7d73":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("svg",{ref:"svg",staticClass:"flamegraph-view",attrs:{version:"1.1",id:"flamegraph-svg","data-width":"100%",width:"100%",height:t.data.imageheight,"data-height":t.data.imageheight,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[a("defs",[a("linearGradient",{attrs:{id:"background",y1:"0",y2:"1",x1:"0",x2:"0"}},[a("stop",{attrs:{"stop-color":t.data.bgcolor1,offset:"5%"}}),a("stop",{attrs:{"stop-color":t.data.bgcolor2,offset:"95%"}})],1)],1),a("rect",{attrs:{x:"0.0",y:"0",id:"svg-background",width:"100%",height:t.data.imageheight,fill:"url(#background)"}}),a("text",{attrs:{"text-anchor":"left",x:t.data.xpad,y:t.data.detailsY,"font-size":t.data.fontsize,"font-family":t.data.fonttype,fill:"rgb(0,0,0)",id:"details"}},[t._v(t._s(t.show))]),a("text",{ref:"unzoom",staticStyle:{opacity:"0.0",cursor:"pointer"},attrs:{"text-anchor":"",x:t.data.xpad,y:"21","font-size":t.data.fontsize,"font-family":t.data.fonttype,fill:"rgb(0,0,0)"},on:{click:function(e){return e.stopPropagation(),t.unzoom()}}},[t._v("Reset Zoom")]),a("text",{ref:"enlarge",staticStyle:{opacity:"0.1",cursor:"pointer"},attrs:{"text-anchor":"",x:t.data.xpad3,y:"21","font-size":t.data.fontsize,"font-family":t.data.fonttype,fill:"rgb(0,0,0)"},on:{mouseover:function(e){return t.zoomover()},mouseout:function(e){return t.zoomout()},click:function(e){return e.stopPropagation(),t.set_parent_inf(e)}}},[t._v(t._s(t.enlarge))]),a("text",{ref:"search",staticStyle:{opacity:"0.1",cursor:"pointer"},attrs:{"text-anchor":"",x:t.data.xpad2,y:"21","font-size":t.data.fontsize,"font-family":t.data.fonttype,fill:"rgb(0,0,0)"},on:{mouseover:function(e){return t.searchover()},mouseout:function(e){return t.searchout()},click:function(e){return e.stopPropagation(),t.search_prompt()}}},[t._v("Search")]),a("text",{ref:"matched",attrs:{"text-anchor":"",x:t.data.xpad2,y:t.data.detailsY,"font-size":t.data.fontsize,"font-family":t.data.fonttype,fill:"rgb(0,0,0)"}},[t._v(t._s(t.matchedtxt))]),t._l(t.nodes,(function(e){return a("g",{staticClass:"func_g",attrs:{"node-index":e.index,"data-search":e.search,"data-funcname":e.func},on:{mouseover:function(a){return t.s(e.name+" "+e.samples)},mouseout:function(e){return t.c()},click:function(e){return e.stopPropagation(),t.zoom(e)}}},[a("title",[t._v(t._s(e.name)+" "+t._s(e.samples))]),a("rect",{attrs:{"node-index":e.index,x:e.rect_x,"data-x":e.rect_x,y:e.rect_y,width:e.rect_w,"data-width":e.rect_w,height:e.rect_h,"data-height":e.rect_h,fill:e.rect_fill,rx:"2",ry:"2"}}),a("text",{attrs:{"data-x":e.text_x,x:e.text_x,y:e.text_y,"font-size":t.data.fontsize,"font-family":t.data.fonttype,fill:"rgb(0,0,0)"}},[t._v(t._s(e.text))])])}))],2)},o=[],i=(a("386d"),a("7f7f"),a("456d"),a("ac6a"),a("9ec8"),a("55dd"),a("6c7b"),a("4917"),a("3b2b"),a("28a5"),a("a481"),0);function c(t,e,a){for(var n=t.childNodes,r=0;r<n.length;r++)if(n[r].tagName==e)return void 0!=a?n[r].attributes[a].value:n[r]}function s(t,e){void 0!=t.attributes["_orig_"+e]&&(t.attributes[e].value=t.attributes["_orig_"+e].value,t.removeAttribute("_orig_"+e))}function l(t,e,a){void 0==t.attributes["_orig_"+e]&&void 0!=t.attributes[e]&&(void 0==a&&(a=t.attributes[e].value),t.setAttribute("_orig_"+e,a))}function u(t){var e=c(t,"title").firstChild.nodeValue;return e}function f(t){var e=u(t);return null!=e&&(e=e.replace(/ .*/,"")),e}function d(t,e,a){if(void 0!=t.attributes&&(void 0!=t.attributes["x"]&&(l(t,"x"),t.attributes["x"].value=(parseFloat(t.attributes["x"].value)-e-10)*a+10,"text"==t.tagName&&(t.attributes["x"].value=c(t.parentNode,"rect","x")+3)),void 0!=t.attributes["width"])){l(t,"width");t.attributes["node-index"].value;var n=t.attributes["width"].value;t.attributes["width"].value=parseFloat(n)*a,t.attributes["width"].value=t.attributes["width"].value}if(void 0!=t.childNodes)for(var r=0,o=t.childNodes;r<o.length;r++)d(o[r],e-10,a)}function h(t,e){if(t.attributes&&(void 0!=t.attributes["x"]&&(l(t,"x"),t.attributes["x"].value=10),void 0!=t.attributes["width"]&&(l(t,"width"),t.attributes["width"].value=parseFloat(e.width.baseVal.value)-20)),void 0!=t.childNodes)for(var a=0,n=t.childNodes;a<n.length;a++)h(n[a],e)}function p(t){var e=c(t,"rect"),a=c(t,"text"),n=parseFloat(e.attributes["width"].value)-3,r=c(t,"title").textContent.split(" (")[0];if(a.attributes["x"].value=parseFloat(e.attributes["x"].value)+3,n<14.16)a.textContent="";else if(a.textContent=r,!(/^ *$/.test(r)||a.getSubStringLength(0,r.length)<n)){for(var o=r.length-2;o>0;o--)if(a.getSubStringLength(0,o+2)<=n)return void(a.textContent=r.substring(0,o)+"..");a.textContent=""}}function m(t){if(void 0!=t.attributes&&(s(t,"x"),s(t,"width")),void 0!=t.childNodes)for(var e=0,a=t.childNodes;e<a.length;e++)m(a[e])}function g(t,e,a){for(var n=new RegExp(t),o=document.getElementsByTagName("g"),s=new Object,u=0,d=0;d<o.length;d++){var h=o[d];if("func_g"==h.attributes["class"].value){var p=f(h),m=c(h,"rect");if(null==m&&(m=c(h,"a"))&&(m=c(r,"rect")),null!=p&&null!=m){var g=parseFloat(m.attributes["width"].value);if(g>u&&(u=g),p.match(n)){var v=parseFloat(m.attributes["x"].value);l(m,"fill"),m.attributes["fill"].value="rgb(230,0,230)",(void 0==s[v]||g>s[v])&&(s[v]=g),i=1}}}}if(!i)return e.style["opacity"]="1.0",void(e.firstChild.nodeValue="Matched: none");a.style["opacity"]="1.0",a.firstChild.nodeValue="Reset Search";var b=0,w=-1,x=0,y=Array();for(var _ in s)s.hasOwnProperty(_)&&y.push(_);for(var S in y.sort((function(t,e){return t-e})),y){var k=parseFloat(y[S]),z=s[y[S]];k>=w+x&&(b+=z,w=k,x=z)}e.style["opacity"]="1.0";var N=100*b/u;N=100==N?"100":N.toFixed(1),e.firstChild.nodeValue="Matched: "+N+"%"}function v(){for(var t=document.getElementsByTagName("rect"),e=0;e<t.length;e++)s(t[e],"fill")}var b=function(){function t(t){return t.split("").reverse().join("")}function e(t){var e,a=0,n=1,r=1,o=10;t=t.replace(/.(.*?)`/,"");for(var i=t.split(""),c=0;c<i.length;c++)if(e=i[c].charCodeAt(0)%o,a+=e/(o++-1)*n,r+=n,n*=.7,o>12)break;return 1-a/r}function a(a,n,r){var o,i,c,s,l,u;if(!a)return"rgb(0, 0, 0)";switch(n?(o=e(r),i=c=e(t(r))):(o=Math.random()+1,i=Math.random()+1,c=Math.random()+1),a){case"hot":return s=205+Math.round(50*c),l=0+Math.round(230*o),u=0+Math.round(55*i),"rgb(".concat(s,", ").concat(l,", ").concat(u,")");case"mem":return s=0,l=190+Math.round(50*i),u=0+Math.round(210*o),"rgb(".concat(s,", ").concat(l,", ").concat(u,")");case"io":return s=80+Math.round(60*o),l=s,u=190+Math.round(55*i),"rgb(".concat(s,", ").concat(l,", ").concat(u,")");default:throw new Error("Unknown type "+a)}}function n(t,e,n,r){return t[r]||(t[r]=a(e,n,r)),t[r]}return n}(),w=function(){function t(t){return Math.round(10*t)/10}function e(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function a(a,n){var r=a.each,o=a.time,i=n.timemax,c=4*n.fontsize,s=2*n.fontsize+10,l=10,u=.82*n.imagewidth,f=.92*n.imagewidth,d=0,h=n.frameheight,p={};i<o&&i/o>.02&&(console.error("Specified timemax %d is less than actual total %d, so it will be ignored",i,o),i=1/0),i=Math.min(o,i);var m=(n.imagewidth-2*l)/i,g=n.minwidth/m;function v(t){function e(t){var e=a.nodes[t];if("number"!==typeof e.stime)throw new Error("Missing start for "+t);e.etime-e.stime<g?e.narrow=!0:(e.narrow=!1,d=Math.max(e.depth,d))}Object.keys(t).forEach(e)}function w(a,o){var c=a.func,u=a.depth,f=a.etime,d=a.stime,g=n.factor,v=n.countname,w=!c.length&&0===u;w&&(f=i);var y,S,k,z,N,F=Math.round(10*(f-d*g))/10,M=F*r,T=F.toLocaleString();w?(z="all",N="(".concat(T," ").concat(v," ").concat(x.formatTime(M),", 100%)")):(y=Math.round(100*F/(i*g)*10)/10,S=y.toLocaleString(),k=e(c),z=k,N="(".concat(T," ").concat(v," ").concat(x.formatTime(M),"), ").concat(S,"%)")),n.profile.get_sample&&(N=n.profile.get_sample(a,n,i));var I,A=t(l+d*m),E=t(l+f*m),P=t(_-s-(u+1)*h+1),C=t(_-s-u*h),O=(E-A)/(n.fontsize*n.fontwidth),$=!1;O>=3&&($=!0,I=c.slice(0,O),O<c.length&&(I=I.slice(0,O-2)+".."),I=e(I));var D=E-A,j=C-P;return{name:z,index:o,search:z.toLowerCase(),samples:N,rect_x:A,rect_y:P,rect_w:D,rect_h:j,rect_fill:b(p,n.colors,n.hash,c),text:I,text_x:A+($?3:0),text_y:3+(P+C)/2,narrow:a.narrow,func:e(c)}}function y(t){for(var e=Object.keys(t),a=new Array(e.length),n=0;n<e.length;n++)a[n]=w(t[e[n]],n);return a}v(a.nodes);var _=d*h+c+s,S=Object.assign({},n,{imageheight:_,xpad:l,xpad2:u,xpad3:f,titleX:n.imagewidth/2,detailsY:_-h/2,viewbox:"0 0 ".concat(n.imagewidth," ").concat(_)});return S.nodes=y(a.nodes),S}return a}(),x=function(){function t(t){t=!isNaN(t)&&t||0,t/=1e3;var e="";return e=t<1e3?"".concat(t.toFixed(2)," ms"):t<6e4?"".concat((t/1e3).toFixed(2)," s"):t<36e5?"".concat((t/6e4).toFixed(2)," min"):t<216e6?"".concat((t/36e5).toFixed(2)," h"):"".concat(t.toFixed(2)," ms"),e}return{formatTime:t}}();function y(t,e){function a(t){t.class=t.narrow?"hidden":""}function n(t){return!t.narrow}e.removenarrows?t.nodes=t.nodes.filter(n):t.nodes.forEach(a)}function _(t,e,a){if(a.push({func:t.name,depth:e.depth,stime:e.stime,etime:e.stime+e.fconfig.profile.get_value(t)}),!t.children)return a;t.children.sort((function(t,e){return t.rettime<e.rettime}));for(var n=0,r=0;r<t.children.length;r++){var o=t.children[r];_(o,{fconfig:e.fconfig,stime:e.stime+n,depth:e.depth+1},a),n+=e.fconfig.profile.get_value(o)}return a}function S(t,e){var a=t.fconfig,n=t.data;return[a.profile.total,_(n,{fconfig:a,stime:0,depth:0},e)]}function k(){var t=this.$refs.svg.clientWidth;this.flamegraphData.fconfig.imagewidth=t,this.flamegraphData.fconfig.timemax=1/0;var e=S(this.flamegraphData,[]);this.flamegraphData.parsed={each:1,time:e[0],nodes:e[1]};var a=w(this.flamegraphData.parsed,this.flamegraphData.fconfig);y(a,this.flamegraphData.fconfig),this.data=a}function z(t){this.show="Function: "+t}function N(){this.show="SWT"}function F(t){var e=t.currentTarget,a=e.attributes["node-index"].value;a,this.need_unzoom[a]&&M.call(this);var n=this.$refs.svg,r=c(e,"rect").attributes,o=parseFloat(r["width"].value),i=parseFloat(r["x"].value),s=parseFloat(i+o),l=parseFloat(r["y"].value),u=(n.width.baseVal.value-20)/parseFloat(r["width"].value),f=1e-4,m=this.$refs.unzoom;m.style["opacity"]="1.0";for(var g,v=document.getElementsByTagName("g"),b=0;b<v.length;b++){var w=v[b],x=(w.attributes["node-index"].value,c(w,"rect").attributes),y=parseFloat(x["x"].value),_=parseFloat(x["width"].value);g=parseFloat(x["y"].value)>l,g?y<=i&&y+_+f>=s?(w.style["opacity"]="0.5",h(w,n),this.need_unzoom[w.attributes["node-index"].value]=!0,p(w)):w.style["display"]="none":y<i||y+f>=s?w.style["display"]="none":(d(w,i,u),this.need_unzoom[w.attributes["node-index"].value]=!1,p(w))}}function M(){var t=this.$refs.unzoom;t.style["opacity"]="0.0";for(var e=document.getElementsByTagName("g"),a=0;a<e.length;a++)e[a].style["display"]="block",e[a].style["opacity"]="1",m(e[a]),p(e[a])}function T(t){this.$refs.search.style["opacity"]="1.0"}function I(t){var e=this.$refs.search;e.style["opacity"]=i?"1.0":"0.1"}function A(){var t=this.$refs.search,e=this.$refs.matched;if(i)v(),i=0,t.style["opacity"]="0.1",t.firstChild.nodeValue="Search",e.style["opacity"]="0.0",e.firstChild.nodeValue="";else{var a=prompt("请输入需要查询的函数名: (允许输入正则表达式，例如: ^ext4_)","");null!=a&&g(a,e,t)}}function E(){this.showBigPic?this.$emit("hidePic"):this.$emit("changPic")}function P(){return this.data.nodes||[]}function C(){var t=this.$refs.svg.clientWidth;this.flamegraphData.fconfig.imagewidth=t,this.flamegraphData.fconfig.timemax=1/0;var e=S(this.flamegraphData,[]);this.flamegraphData.parsed={each:1,time:e[0],nodes:e[1]};var a=w(this.flamegraphData.parsed,this.flamegraphData.fconfig);y(a,this.flamegraphData.fconfig),this.data=a,M.call(this)}var O={mounted:k,methods:{s:z,c:N,zoom:F,unzoom:M,searchover:T,searchout:I,search_prompt:A,set_parent_inf:E},computed:{nodes:P},watch:{showBigPic:C}},$={data:function(){return{data:{},matchedtxt:"",show:"SWT",need_unzoom:{}}},props:["flamegraphData","showBigPic"],mounted:function(){O.mounted.call(this)},methods:{s:function(t){O.methods.s.call(this,t)},c:function(){O.methods.c.call(this)},zoom:function(t){O.methods.zoom.call(this,t)},unzoom:function(){O.methods.unzoom.call(this)},searchover:function(){O.methods.searchover.call(this)},searchout:function(){O.methods.searchout.call(this)},search_prompt:function(){O.methods.search_prompt.call(this)},set_parent_inf:function(){O.methods.set_parent_inf.call(this)},zoomover:function(){this.$refs.enlarge.style["opacity"]="1.0"},zoomout:function(){this.$refs.enlarge.style["opacity"]="0.1"}},computed:{nodes:function(){return O.computed.nodes.call(this)},enlarge:function(){return this.showBigPic?"ZoomOut":"ZoomIn"}},watch:{showBigPic:function(){return O.watch.showBigPic.call(this)},flamegraphData:function(){return O.watch.showBigPic.call(this)}}},D=$,j=a("2877"),B=Object(j["a"])(D,n,o,!1,null,null,null);e["a"]=B.exports},"83a1":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"9ec8":function(t,e,a){"use strict";a("386b")("fontsize",(function(t){return function(e){return t(this,"font","size",e)}}))},a481:function(t,e,a){"use strict";var n=a("cb7c"),r=a("4bf8"),o=a("9def"),i=a("4588"),c=a("0390"),s=a("5f1b"),l=Math.max,u=Math.min,f=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,h=/\$([$&`']|\d\d?)/g,p=function(t){return void 0===t?t:String(t)};a("214f")("replace",2,(function(t,e,a,m){return[function(n,r){var o=t(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,o,r):a.call(String(o),n,r)},function(t,e){var r=m(a,t,this,e);if(r.done)return r.value;var f=n(t),d=String(this),h="function"===typeof e;h||(e=String(e));var v=f.global;if(v){var b=f.unicode;f.lastIndex=0}var w=[];while(1){var x=s(f,d);if(null===x)break;if(w.push(x),!v)break;var y=String(x[0]);""===y&&(f.lastIndex=c(d,o(f.lastIndex),b))}for(var _="",S=0,k=0;k<w.length;k++){x=w[k];for(var z=String(x[0]),N=l(u(i(x.index),d.length),0),F=[],M=1;M<x.length;M++)F.push(p(x[M]));var T=x.groups;if(h){var I=[z].concat(F,N,d);void 0!==T&&I.push(T);var A=String(e.apply(void 0,I))}else A=g(z,d,N,F,T,e);N>=S&&(_+=d.slice(S,N)+A,S=N+z.length)}return _+d.slice(S)}];function g(t,e,n,o,i,c){var s=n+t.length,l=o.length,u=h;return void 0!==i&&(i=r(i),u=d),a.call(c,u,(function(a,r){var c;switch(r.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(s);case"<":c=i[r.slice(1,-1)];break;default:var u=+r;if(0===u)return a;if(u>l){var d=f(u/10);return 0===d?a:d<=l?void 0===o[d-1]?r.charAt(1):o[d-1]+r.charAt(1):a}c=o[u-1]}return void 0===c?"":c}))}}))},aa77:function(t,e,a){var n=a("5ca1"),r=a("be13"),o=a("79e5"),i=a("fdef"),c="["+i+"]",s="​",l=RegExp("^"+c+c+"*"),u=RegExp(c+c+"*$"),f=function(t,e,a){var r={},c=o((function(){return!!i[t]()||s[t]()!=s})),l=r[t]=c?e(d):i[t];a&&(r[a]=l),n(n.P+n.F*c,"String",r)},d=f.trim=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(l,"")),2&e&&(t=t.replace(u,"")),t};t.exports=f},b7d6:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-row",{staticStyle:{"padding-top":"15px","padding-bottom":"15px","border-bottom":"1px solid white"}},[a("NodeFilter",{ref:"nodeFilter",on:{selectNodeServiceChange:t.onSelectNodeServiceChange}})],1),a("el-row",{staticStyle:{"padding-top":"15px","padding-bottom":"15px","border-bottom":"1px solid white"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.nodeServices.slice((t.currpage-1)*t.pagesize,t.currpage*t.pagesize),stripe:""}},[a("el-table-column",{attrs:{label:"类型",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.base.node.type)+"\n        ")]}}])}),a("el-table-column",{attrs:{label:"节点",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.base.node.name)+"\n        ")]}}])}),a("el-table-column",{attrs:{label:"地址",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.base.node.addr)+"\n        ")]}}])}),a("el-table-column",{attrs:{label:"服务地址",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.base.addr)+"\n        ")]}}])}),a("el-table-column",{attrs:{label:"服务名",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.base.name)+"\n        ")]}}])}),a("el-table-column",{attrs:{label:"flamegraph",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"normal",disabled:""==e.row.result},on:{click:function(a){return t.onShowFlameGraphCpu(e.row)}}},[t._v(t._s("CPU"))]),a("el-button",{attrs:{size:"normal",disabled:""==e.row.result},on:{click:function(a){return t.onShowFlameGraphMem(e.row)}}},[t._v(t._s("MEM"))])]}}])}),a("el-table-column",{attrs:{label:"size",width:"50px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.result.length)+"\n        ")]}}])}),a("el-table-column",{attrs:{label:"error",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{placeholder:""},model:{value:e.row.error,callback:function(a){t.$set(e.row,"error",a)},expression:"scope.row.error"}})]}}],null,!1,889115576)})],1),a("div",{staticStyle:{"text-align":"center","margin-top":"30px"}},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next, sizes, total, jumper","page-sizes":[5,10,15,20],"page-size":t.pagesize,"current-page":t.currpage,total:t.nodeServices.length},on:{"update:pageSize":function(e){t.pagesize=e},"update:page-size":function(e){t.pagesize=e},"update:currentPage":function(e){t.currpage=e},"update:current-page":function(e){t.currpage=e},"current-change":t.changePageIndex,"size-change":t.changePageSize}})],1)],1),a("el-row",{staticStyle:{"padding-top":"15px","padding-bottom":"15px","border-bottom":"1px solid white"}},[a("el-input-number",{model:{value:t.checkTime,callback:function(e){t.checkTime=e},expression:"checkTime"}}),t._v("秒\n  ")],1),a("el-row",{staticStyle:{"padding-top":"15px","padding-bottom":"15px","border-bottom":"1px solid white"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.commitDebugCommand()}}},[t._v(t._s(t.buttonText))])],1),a("el-dialog",{attrs:{visible:t.showFlameGraph,title:t.dialogTitle,height:"95%",width:"95%"},on:{"update:visible":function(e){t.showFlameGraph=e}}},[a("flamegraph",{ref:"flamegraph",attrs:{flamegraphData:t.flamegraphData}})],1)],1)},r=[],o=a("e27c"),i=o["a"],c=a("2877"),s=Object(c["a"])(i,n,r,!1,null,null,null);e["default"]=s.exports},c5f6:function(t,e,a){"use strict";var n=a("7726"),r=a("69a8"),o=a("2d95"),i=a("5dbc"),c=a("6a99"),s=a("79e5"),l=a("9093").f,u=a("11e9").f,f=a("86cc").f,d=a("aa77").trim,h="Number",p=n[h],m=p,g=p.prototype,v=o(a("2aeb")(g))==h,b="trim"in String.prototype,w=function(t){var e=c(t,!1);if("string"==typeof e&&e.length>2){e=b?e.trim():d(e,3);var a,n,r,o=e.charCodeAt(0);if(43===o||45===o){if(a=e.charCodeAt(2),88===a||120===a)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+e}for(var i,s=e.slice(2),l=0,u=s.length;l<u;l++)if(i=s.charCodeAt(l),i<48||i>r)return NaN;return parseInt(s,n)}}return+e};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof p&&(v?s((function(){g.valueOf.call(a)})):o(a)!=h)?i(new m(w(e)),a,p):w(e)};for(var x,y=a("9e1e")?l(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),_=0;y.length>_;_++)r(m,x=y[_])&&!r(p,x)&&f(p,x,u(m,x));p.prototype=g,g.constructor=p,a("2aba")(n,h,p)}},e27c:function(t,e,a){"use strict";(function(t){a("ac4d"),a("8a81"),a("1c4c"),a("6b54"),a("2397"),a("5df3"),a("f400"),a("96cf");var n=a("3b8d"),r=(a("4917"),a("c5f6"),a("ac6a"),a("7f7f"),a("d225")),o=a("b0b4"),i=a("4e2b"),c=a("308d"),s=a("6bb5"),l=a("9ab4"),u=a("60a3"),f=a("7d73"),d=a("26de");function h(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=p(t))){var e=0,a=function(){};return{s:a,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,r,o=!0,i=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){i=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw r}}}}function p(t,e){if(t){if("string"===typeof t)return m(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?m(t,e):void 0}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function g(t){return function(){var e,a=Object(s["a"])(t);if(v()){var n=Object(s["a"])(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return Object(c["a"])(this,e)}}function v(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var b=function(e){Object(i["a"])(c,e);var a=g(c);function c(){var t;return Object(r["a"])(this,c),t=a.apply(this,arguments),t.currpage=1,t.pagesize=5,t.nodeServices=[],t.curNodeServices=[],t.runAmount=0,t.showFlameGraph=!1,t.dialogTitle="",t.flamegraphData=null,t.websock=null,t.checkTime=10,t.buttonText="开始",t.buttonTime=0,t}return Object(o["a"])(c,[{key:"onShowFlameGraphCpu",value:function(t){var e=JSON.parse(t.result),a=e.time>e.nodes.value?e.time:e.nodes.value;e.nodes.rettime=a-e.nodes.value;var n={name:"root",value:a,rettime:0,children:[{name:"idle",value:a-e.nodes.value,rettime:0},e.nodes]};this.dialogTitle="".concat(t.base.node&&t.base.node.name," ").concat(t.base.addr,"-").concat(t.base.name),this.flamegraphData={fconfig:{fonttype:"Verdana",fontsize:12,imagewidth:"100%",frameheight:16,fontwidth:.59,minwidth:.1,countname:"samples",colors:"hot",bgcolor1:"#eeeeee",bgcolor2:"#eeeeb0",timemax:1/0,factor:1,hash:!0,titletext:"Flame Graph",nametype:"Function:",removenarrows:!0,profile:{total:a,get_value:function(t){return t.value}}},data:n},this.showFlameGraph=!0}},{key:"onShowFlameGraphMem",value:function(t){var e=JSON.parse(t.result),a=e.nodes;this.dialogTitle="".concat(t.base.node&&t.base.node.name," ").concat(t.base.addr,"-").concat(t.base.name),this.flamegraphData={fconfig:{fonttype:"Verdana",fontsize:12,imagewidth:"100%",frameheight:16,fontwidth:.59,minwidth:.1,countname:"Byte",colors:"hot",bgcolor1:"#eeeeee",bgcolor2:"#eeeeb0",timemax:1/0,factor:1,hash:!0,titletext:"Flame Graph",nametype:"Function:",removenarrows:!0,profile:{total:a.alloc_count,get_value:function(t){return t.alloc_count},get_sample:function(t,e,a){var n=Math.round(10*(t.etime-t.stime*e.factor))/10,r=Math.round(100*n/(a*e.factor)*10)/10,o="";return n>1024?o="".concat((n/1024).toFixed(2)," KB"):n>1048576?o="".concat((n/1024/1024).toFixed(2)," MB"):n>1073741824&&(o="".concat((n/1024/1024/1024).toFixed(2)," GB")),"".concat(n," Byte ").concat(o," ").concat(r,"%")}}},data:a},this.showFlameGraph=!0}},{key:"onSelectNodeServiceChange",value:function(t){var e=this;this.curNodeServices=[],t.forEach((function(t){e.curNodeServices.push({base:t,result:"",error:"",tempMap:null})})),0==this.runAmount&&(this.currpage=1,this.nodeServices=this.curNodeServices)}},{key:"changePageIndex",value:function(t){this.currpage=t}},{key:"changePageSize",value:function(t){this.pagesize=t}},{key:"commitDebugCommand",value:function(){var e=this;this.websock&&this.websock.close(),this.buttonTime&&window.clearInterval(this.buttonTime);var a=Number(this.checkTime);this.buttonText=a+"s",this.buttonTime=window.setInterval((function(){a--,e.buttonText=a+"s",a<=0&&(window.clearInterval(e.buttonTime),e.buttonTime=null,e.buttonText="开始")}),1e3);var r=window.location.host,o=Object({NODE_ENV:"production",BASE_URL:"/admin/"}).VUE_APP_BASE_API||"/admin/";if(o){var i=o.match(/http:\/\/(.*)\//);r=i?i[1]:r}this.runAmount++,this.currpage=1,this.nodeServices=this.curNodeServices,this.websock=new WebSocket("ws://"+r+"/api/profiler"),this.websock.onmessage=function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){var n,r,o,i,c,s,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("$$$$ [profiler] onmessage:",a),t.next=3,new Response(a.data).text();case 3:n=t.sent,r=JSON.parse(n),o=h(e.nodeServices);try{for(o.s();!(i=o.n()).done;)if(c=i.value,c.base.node&&r.node_id==c.base.node.addr&&r.addr==c.base.addr)if("error"==r.type)c.error=r.msg,c.tempMap=null;else if("print"==r.type&&(null==c.tempMap&&(c.tempMap=new Map),c.tempMap.set(r.msg.index,r.msg.text),void 0!=c.tempMap.get(0)&&c.tempMap.size>=r.msg.max+1)){for(s="",l=r.msg.max;l>=0;--l)s+=c.tempMap.get(l);c.result=s,c.tempMap=null}}catch(u){o.e(u)}finally{o.f()}case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.websock.onopen=function(){var a=[];for(var n in e.nodeServices)e.nodeServices[n].result="",e.nodeServices[n].error="",a.push(e.nodeServices[n].base);var r=JSON.stringify({cmd:"run",time:Number(e.checkTime),targets:a});e.websock.send(t.from(r))},this.websock.onclose=function(){console.log("socket close")},this.websock.onerror=function(t){console.log("socket err: ".concat(t.message))}}}]),c}(u["c"]);b=Object(l["a"])([Object(u["a"])({name:"Profiler",components:{NodeFilter:d["a"],flamegraph:f["a"]}})],b),e["a"]=b}).call(this,a("b639").Buffer)},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=Profiler.ab06ab79.js.map